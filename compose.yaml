networks:
    default:
        name: 'z_app_network'
        driver: 'bridge'

services:
    ###> doctrine/doctrine-bundle ###
    database:
        image: 'mysql:8.0-debian'
        restart: 'unless-stopped'
        container_name: 'z_task_db'
        environment:
            MYSQL_ROOT_PASSWORD: '$MYSQL_ROOT_PASSWORD'
    ###< doctrine/doctrine-bundle ###

    ###> APP ###
    z_app:
        build: .
        restart: 'unless-stopped'
        container_name: 'z_app'
        volumes:
        - '.:/usr/share/nginx/www/z_app'
        - './nginx.conf:/etc/nginx/sites-enabled/default:ro'
        - './php.ini:/etc/php/8.4/cli/php.ini:ro'
        - './fpm-www.conf:/etc/php/8.4/fpm/pool.d/www.conf:ro'
        - './php8.4-fpm.service:/etc/systemd/system/php8.4-fpm.service:ro'
        - './supervisord.conf:/etc/supervisor/conf.d/supervisord.conf:ro'
        depends_on:
        - 'database'
    ###< APP ###
